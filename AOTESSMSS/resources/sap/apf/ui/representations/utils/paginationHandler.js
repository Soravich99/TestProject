/* SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP SE. All rights reserved
 */
jQuery.sap.declare("sap.apf.ui.representations.utils.paginationHandler");(function(){'use strict';sap.apf.ui.representations.utils.PaginationHandler=function(){this.pagingOption={top:100,skip:0};};sap.apf.ui.representations.utils.PaginationHandler.prototype.constructor=sap.apf.ui.representations.utils.PaginationHandler;function _(t){this.pagingOption.skip=t.getData().tableData.length;this.pagingOption.top=99;}function a(t){if(!t||!t.tableControl||t.tableControl.bIsDestroyed){return;}var T=t.tableControl.getModel();var p=T.getData();t.tableControl.getParent().setBusy(true);sap.ui.getCore().applyChanges();_.bind(this)(T);var A=t.oApi.getActiveStep();t.oApi.updatePath(function(s,S){if(s===A){T.setData(p);t.markSelectionInTable();t.tableControl.getParent().setBusy(false);if(!i.bind(this)(t)&&t.containerForTable.getItems().length>1){t.containerForTable.removeItem(t.containerForTable.getItems()[1]);}}}.bind(this));}function i(t){if(this.pagingOption.skip+this.pagingOption.top<t.nDataResponseCount){return true;}}function b(t){var l=new sap.m.Link({text:"More"}).addStyleClass("loadMoreLink");if(i.bind(this)(t)){t.containerForTable.addItem(l);}return l;}function c(t){var s=this;var l=b.bind(s)(t);l.attachPress(function(){a.bind(s)(t,l);});}function d(p,t){var e=t.tableControl;e.attachFirstVisibleRowChanged(function(E){var f=E.getParameter("firstVisibleRow");var v=e.getVisibleRowCount();var g=p.pagingOption.top+p.pagingOption.skip;if(f+v+10>g){a.bind(p)(t);}});}sap.apf.ui.representations.utils.PaginationHandler.prototype.attachPaginationOnTable=function(t){if(sap.ui.Device.system.desktop){d(this,t);}else{c.bind(this)(t);}};sap.apf.ui.representations.utils.PaginationHandler.prototype.getPagingOption=function(t){var e,s;if(t){e=t;s=0;}else if(this.pagingOption.top!==100&&this.pagingOption.skip!==0){e=this.pagingOption.top;s=this.pagingOption.skip;}else{e=100;s=0;}this.pagingOption={inlineCount:t?false:true,top:e,skip:s};return this.pagingOption;};sap.apf.ui.representations.utils.PaginationHandler.prototype.resetPaginationOption=function(){this.pagingOption={top:100,skip:0};};}());
