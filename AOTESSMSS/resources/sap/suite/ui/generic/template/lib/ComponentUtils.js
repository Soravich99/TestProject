sap.ui.define(["jquery.sap.global","sap/ui/base/Object"],function(q,B){"use strict";var C={};function g(c,o){var h;var H=null;var a;var b;var I=false;var d=[];var e=[];function f(i){var e1;var f1=c.getModel();if(i){if(f1){e1=f1.getProperty(i);}}else{var g1=c.getBindingContext();if(g1){e1=g1.getObject();}}return!!(e1&&e1.__metadata&&e1.__metadata.created);}function j(){return c.getModel("_templPriv");}function k(){return j().getProperty("/generic/viewLevel");}function l(){return o.preprocessorsData;}function m(){return o.oParameterModel;}function n(){var i=c.getModel("i18n").getResourceBundle();return{dataLoadFailedTitle:i.getText("ST_ERROR"),dataLoadFailedText:i.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")};}function A(i,e1,f1){if(typeof f1!=="function"){throw new Error("Event handler must be a function");}e.push({template:i,event:e1,handler:f1});}function D(e1,f1,g1){for(var i=e.length;i--;){if(e[i].handler===g1&&e[i].event===f1&&e[i].template===e1){e.splice(i,1);}}}function F(e1,f1,g1){for(var i=0;i<e.length;i++){if(e[i].event===f1&&e[i].template===e1){e[i].handler(g1);}}}function p(i){return i.getMetadata().getName();}function r(){return o.oApplication.isComponentActive(c);}function P(i,e1){var f1=o.oNavigationObserver.getProcessFinished(true);f1.then(function(){if(r()){if(e1){z(true);}F(p(o.oController),"PageDataLoaded",{context:i});}});}function s(){h.then(function(i){if(i){P(i);}});}function S(){o.oHeaderLoadingObserver.startProcess();if(!b){var i=new Promise(function(e1){b=e1;});o.oApplication.getBusyHelper().setBusy(i);}}function t(){I=true;if(!H){h=new Promise(function(i){H=i;});}if(!c.getComponentContainer().getElementBinding().isSuspended()){S();}}function E(){if(b){b();b=null;}o.oHeaderLoadingObserver.stopProcess();}function u(i){var e1=i.getSource().getBoundContext();if(e1){return e1;}if(c.getComponentContainer().getElementBinding().isSuspended()){e1=null;}else{e1=C;}U();E();return e1;}function N(){var i=n();var e1=c.getAppComponent().getNavigationController();e1.navigateToMessagePage({title:i.dataLoadFailedTitle,text:i.dataLoadFailedText,description:"",viewLevel:k()});}function v(){I=false;if(!a){return;}if(a===C){N();}else if(!c.getComponentContainer().getElementBinding().isSuspended()){if(H){H(a);}(o.methods.updateBindingContext||q.noop)();}else{return;}H=null;a=null;}function w(i){E();if(I){a=u(i);}v();}function x(i){a=u(i);v();o.oHeaderLoadingObserver.stopProcess();}function R(i){var e1={};var f1=l();if(f1.rootContextExpand&&f1.rootContextExpand.length){e1.expand=f1.rootContextExpand.join(",");}o.oHeaderLoadingObserver.startProcess();if(o.methods.beforeRebind){o.methods.beforeRebind();}h=new Promise(function(g1){a=null;H=g1;c.getComponentContainer().bindElement({path:i,events:{dataRequested:t,dataReceived:w,change:x},parameters:e1,batchGroupId:"Changes",changeSetId:"Changes"});});if(o.methods.afterRebind){o.methods.afterRebind();}}function U(){var i=c.getComponentContainer();i.unbindElement();a=null;}function y(){var e1=T();var f1=(e1.length===d.length);for(var i=0;i<e1.length&&f1;i++){f1=e1[i]===d[i];}d=e1;return!f1;}function z(e1){var f1=o.reuseComponentProxies;for(var i=0;i<f1.length;i++){f1[i].pathUnchangedCallBack(e1);}}function G(i,e1){var f1=y();if(!i){if(o.routingSpec&&o.routingSpec.noOData){P(null,f1);}return;}var g1=c.getComponentContainer();if(!g1){return;}if(f(i)){U();g1.setBindingContext(g1.getModel().getContext(i));Promise.all([o.oViewRenderedPromise,o.viewRegisterd]).then(z.bind(null,true));}else{var h1=g1.getElementBinding();if(h1){if(h1.getPath()===i){if(h1.isSuspended()){h1.resume();v();}if(I){S();}o.oApplication.getBusyHelper().getUnbusy().then(z.bind(null,f1&&o.routingSpec.noOData));if(!e1){s();}return;}else if(!e1){U();}}var i1=c.getModel("ui");i1.setProperty("/enabled",false);i1.setProperty("/editable",false);R(i);s();}}function J(){var i=c.getComponentContainer().getElementBinding();if(i){c.getModel().invalidateEntry(i.getBoundContext());if(i.isSuspended()){U();}else{i.refresh(true);}}}function K(){var i,e1;i=c.getComponentContainer();if(!i){return;}e1=i.getElementBinding();if(e1){e1.refresh();}}function L(){var i=c.getComponentContainer();var e1=i.getBindingContext();var f1=e1&&e1.getPath();var g1=f1&&f(f1);if(g1){i.setBindingContext();return;}var h1=i.getElementBinding();if(h1&&!h1.isSuspended()){if(o.oTemplateContract.oValidationMessageBinding.getLength()){U();}else{h1.suspend();}E();}}function M(i){o.oApplication.setBackNavigation(i);}function O(i){var e1=k();return o.oApplication.registerContext(i,e1);}function Q(){return o.oApplication.getBreadCrumbInfo(c.getEntitySet());}function T(){return o.oApplication.getCurrentKeys(k());}function V(){return o.oApplication.getCommunicationModel(c);}function W(i){return o.oApplication.getCommunicationObject(c,i);}function X(i,e1,f1,g1){o.oApplication.navigateRoute(i,e1,o,f1,g1);}function Y(){var i=c.getEntitySet();var e1=o.oTemplateContract.mEntityTree[i];return e1.headerTitle;}function Z(){var i=c.getEntitySet();var e1=o.oTemplateContract.mEntityTree[i];return e1.isDraft;}function $(){if(Z()){var i=o.oApplication.getHierarchySectionsFromCurrentHash();return"/"+i[0];}}function _(){return!(o.routingSpec&&o.routingSpec.noOData);}function a1(){return h;}function b1(){return o.oTemplateContract.oPaginatorInfo[k()-1];}function c1(i,e1){var f1=k();if(!e1){f1--;}o.oTemplateContract.oPaginatorInfo[f1]=i;}function d1(i,e1){var f1=e1.getId();var g1=f1.split("::");var h1=g1[g1.length-2];var i1=j();i1.setProperty("/generic/embeddedComponents/"+h1+"/isInVisibleArea",i);}return{setEditableNDC:function(i){o.oApplication.setEditableNDC(i);},getEditableNDC:function(){return o.oApplication.getEditableNDC();},getBusyHelper:function(){return o.oApplication.getBusyHelper();},isNonDraftCreate:f,attach:function(i,e1,f1){A(p(i),e1,f1);},detach:function(i,e1,f1){D(p(i),e1,f1);},fire:function(i,e1,f1){F(p(i),e1,f1);},isListReportTemplate:function(){return sap.suite.ui.generic.template.js.AnnotationHelper.isListReportTemplate(o.routeConfig);},getPreprocessorsData:l,getParameterModelForTemplating:m,bindComponent:G,refreshBinding:K,refreshBindingUnconditional:J,suspendBinding:L,setBackNavigation:M,getTemplatePrivateModel:j,registerContext:O,getViewLevel:k,getBreadCrumbInfo:Q,getCurrentKeys:T,getDraftRootPath:$,getCommunicationModel:V,getCommunicationObject:W,navigateRoute:X,getTitleFromTreeNode:Y,isDraftEnabled:Z,isODataBased:_,isComponentActive:r,navigateToDataLoadedFailedPage:N,getHeaderDataAvailablePromise:a1,getPaginatorInfo:b1,setPaginatorInfo:c1,onVisibilityChangeOfReuseComponent:d1};}return B.extend("sap.suite.ui.generic.template.lib.ComponentUtils",{constructor:function(c,o){q.extend(this,g(c,o));}});});
