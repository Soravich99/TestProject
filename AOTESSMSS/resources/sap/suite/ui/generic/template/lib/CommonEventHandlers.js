sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/m/Select","sap/m/MessageBox","sap/m/MessageToast","sap/m/Table","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/comp/smartfilterbar/SmartFilterBar","sap/ui/model/odata/type/Time","sap/suite/ui/generic/template/lib/testableHelper","sap/ui/table/TreeTable","sap/ui/model/json/JSONModel","sap/ui/core/mvc/ViewType","sap/suite/ui/generic/template/js/AnnotationHelper","sap/suite/ui/generic/template/lib/modelHelper"],function(q,B,N,D,S,M,a,T,F,b,c,d,t,e,J,V,A,m){"use strict";function g(p,i){var o;if(i){o=N.getCurrencyInstance({showMeasure:false});}else{o=N.getFloatInstance({precision:p.precision,decimals:p.scale});}return function(P,u){P=o.format(P,u);if(u){P+=" "+u;}return P;};}function f(C,p,s){var o=C.getModel("entitySet").getMetaModel(),i=o.getObject(o.getMetaContext(C.sPath).sPath),P=o.getObject(o.getMetaContext(C.sPath+"/"+p).sPath),j={path:p,data:{type:P.type,displayFormat:" ",label:s,textPath:p,textArrangement:A.getTextArrangement(i,P),unit:null,fnDecimalFormatter:null}},O="Org.OData.Measures.V1.Unit",l="Org.OData.Measures.V1.ISOCurrency",I=false,n,r,u,L;if(P){if(P.extensions){L=P.extensions.length;for(var k=0;k<L;k++){n=P.extensions[k];if(n.namespace==="http://www.sap.com/Protocols/SAPData"){switch(n.name){case"display-format":j.data.displayFormat=n.value;break;case"label":if(!j.data.label){j.data.label=n.value;}break;case"text":r=n.value;u=p.split("/");u[u.length-1]=r;j.data.textPath=u.join("/");break;default:break;}}}}if(j.data.label===""||j.data.label===undefined){j.data.label=p;}if(P.type==="Edm.Decimal"){if(P[l]){j.data.unit=P[l].Path;I=true;}else if(P[O]){j.data.unit=P[O].Path;}j.data.fnDecimalFormatter=g(P,I);}}return j;}function G(p,C){var i={};return function(o){var P=o.getProperty(p),s="",j,u,k,l,n;j=i[p];if(!j){j=f(o,p,C);i[p]=j;}if(j.data.textPath&&j.data.textPath!==""){k=o.getProperty(j.data.textPath);}switch(j.data.type){case"Edm.DateTime":if(j.data.displayFormat==="Date"){if(P&&P!==""&&P.getTime){l=D.getDateInstance({style:"medium"});n=new Date(0).getTimezoneOffset()*60*1000;P=l.format(new Date(P.getTime()+n));}}break;case"Edm.Time":if(P&&P!==""){P=new d().formatValue(P,"string");}break;case"Edm.Boolean":if(P===true){P="{i18n>YES}";}else if(P===false){P="{i18n>NO}";}break;case"Edm.Decimal":u=(j.data.unit)?o.getProperty(j.data.unit):"";P=j.data.fnDecimalFormatter(P,u);break;default:break;}if(!k||j.data.textPath===p){s=P?P:"";}else{switch(j.data.textArrangement){case"idAndDescription":s=P+" ("+k+")";break;case"idOnly":s=P;break;case"descriptionOnly":s=k;break;default:s=k+(P?" ("+P+")":"");break;}}return{key:s?s:p,text:j.data.label?j.data.label+": "+s:s};};}function h(C,o,s,l){function E(i){var j={};for(var k in i){var x=i[k];if(typeof x==="string"){j[k]=x;}else if(typeof x==="object"){if(x.value){j[k]=E(x).value;}else{j[k]=x;}}}return j;}function H(i){if(i instanceof sap.ui.generic.app.navigation.service.NavError){if(i.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){sap.m.MessageBox.show(l.getText("ST_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:l.getText("ST_GENERIC_ERROR_TITLE")});}else{sap.m.MessageBox.show(i.getErrorCode(),{title:l.getText("ST_GENERIC_ERROR_TITLE")});}}}function n(){var i=C.getView().getBindingContext();return s.oApplication.getDraftSiblingPromise(i);}function p(j){var k=j;var x=-1;var D1=l.getOwnerControl(j);if(D1.getTable){D1=D1.getTable();}var E1=l.isAnalyticalTable(D1);var F1=o.getViewLevel();var G1;if(!E1){var H1=l.getTableBindingInfo(D1);var I1=H1&&H1.binding;var J1=null;if(I1){if(D1 instanceof e){var K1=(I1.getLength()>0)?I1.getLength():0;if(K1>0){J1=[];for(var L1=0;L1<K1;L1++){J1.push(I1.getContextByIndex(L1));}}}else if(l.isUiTable(D1)){J1=I1.getContexts();}else if(D1 instanceof T){J1=I1.getCurrentContexts();}}var M1=null;var N1=l.getSelectedContexts(D1);var O1=null;if(N1&&N1.length>0){O1=N1[0].getPath();}else if(k){O1=k.getBindingContext()?k.getBindingContext().sPath:null;}if(I1&&I1.getContexts&&O1){for(var i=0;i<J1.length;i++){M1=J1[i];if(M1&&M1.getPath()===O1){x=i;break;}}}if(D1&&x!==-1&&J1.length>0){var P1;if(D1 instanceof T){P1=D1.getGrowingThreshold();}else if(l.isUiTable(D1)){P1=D1.getThreshold();}var Q1=F1>0?l.getTableBindingInfo(D1).path:null;var R1=function(S1){return{context:S1,navigationData:{navigationProperty:Q1}};};G1=J1&&{listBinding:I1,growingThreshold:P1,selectedRelativeIndex:x,objectPageNavigationContexts:J1,navigitionInfoProvider:R1};}}o.setPaginatorInfo(G1,true);}function r(j,k){var x=C.getView().getModel().getMetaModel();var D1=k;var E1=x.getODataEntitySet(j,false);var F1=x.getODataEntityType(E1.entityType,false);var G1=F1.key.propertyRef;var i;var H1=s.oDraftController.getDraftContext();if(H1.isDraftEnabled(j)){G1=G1.concat(H1.getSemanticKey(j));G1.push({name:"IsActiveEntity"},{name:"HasDraftEntity"},{name:"HasActiveEntity"});}if(D1.parameters.select&&D1.parameters.select.length>0){var I1=D1.parameters.select.split(",");for(i=0;i<G1.length;i++){if(q.inArray(G1[i].name,I1)===-1){D1.parameters.select+=","+G1[i].name;I1=D1.parameters.select.split(",");}}}return D1;}function u(i,j){var k=i.getSource().getUrl();i.preventDefault();l.processDataLossConfirmationIfNonDraft(function(){sap.m.URLHelper.redirect(k,false);},q.noop,j);}function v(i,j){i.preventDefault();var k=i.getSource().getHref();l.processDataLossConfirmationIfNonDraft(function(){window.location.hash=k;},q.noop,j);}function w(j){var k=[];return l.getDialogFragment("sap.suite.ui.generic.template.ListReport.view.fragments.DeleteConfirmation",{onCancel:function(i){var x=i.getSource().getParent();x.close();},onDelete:function(x){var D1=x.getSource().getParent();var E1=D1.getModel("delete");var F1=E1.getProperty("/items");var G1=[];var H1=[];var I1=[];k=[];for(var i=0;i<F1.length;i++){if(!F1[i].draftStatus.locked&&F1[i].deletable){if(!F1[i].draftStatus.draft){if(F1[i].draftStatus.draftActive){I1.push(F1[i].context.sPath);}else if(F1.length===E1.getProperty("/unsavedChangesItemsCount")||!F1[i].draftStatus.unsavedChanges||E1.getProperty("/checkboxSelected")){G1.push(F1[i].context.sPath);}}else{H1.push(F1[i].context.sPath);k.push(F1[i].context.sPath);}}}H1=H1.concat(G1).concat(I1);s.oCRUDManager.deleteEntities(H1).then(function(J1){var K1=0;var L1=[];for(var i=0;i<J1.length;i++){L1.push("/"+J1[i].split('/')[1]);if(k.indexOf(L1[i])!==-1){K1=K1+1;}}var M1=j.getTable();M1.getModel("_templPriv").setProperty("/listReport/deleteEnabled",false);var N1=H1.length-I1.length-(J1.length-K1);if((J1.length-K1)>0){var O1="";if(N1>0){O1+=(N1>1)?l.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL_WITH_COUNT",[N1]):l.getText("ST_GENERIC_DELETE_SUCCESS_WITH_COUNT",[N1]);O1+="\n";O1+=(J1.length>1)?l.getText("ST_GENERIC_DELETE_ERROR_PLURAL_WITH_COUNT",[J1.length]):l.getText("ST_GENERIC_DELETE_ERROR_WITH_COUNT",[J1.length]);}else{O1=(J1.length>1)?l.getText("ST_GENERIC_DELETE_ERROR_PLURAL"):l.getText("ST_GENERIC_DELETE_ERROR");}M.error(O1);}else{var P1="";P1=(N1>1)?l.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL"):l.getText("ST_GENERIC_OBJECT_DELETED");s.oApplication.showMessageToast(P1);}l.refreshSmartTable(j);},function(J1){M.error(l.getText("ST_GENERIC_DELETE_ERROR_PLURAL",[H1.length]),{styleClass:l.getContentDensityClass()});});D1.close();}},"delete");}function y(i,j){return new Promise(function(k,x){j.read(i+"/SiblingEntity",{success:function(D1){var E1="/"+j.getKey(D1);k(E1);},error:function(D1){var E1="Error";k(E1);}});});}function z(j){var k=C.getView().getModel();var x=k.getMetaModel();var D1=x.getODataEntitySet(C.getOwnerComponent().getEntitySet());var E1=D1["Org.OData.Capabilities.V1.DeleteRestrictions"];var F1=(E1&&E1.Deletable&&E1.Deletable.Path)?E1.Deletable.Path:"";var G1={items:undefined,itemsCount:j.length,text:{title:undefined,shortText:undefined,unsavedChanges:undefined,longText:undefined,undeletableText:undefined},lockedItemsCount:0,unsavedChangesItemsCount:0,undeletableCount:0,checkboxSelected:true};var H1=[];var I1=[];var J1,K1,L1,M1,N1;var O1=[];for(var i=0;i<j.length;i++){J1=k.getObject(j[i].getPath());if(!J1.IsActiveEntity){if(J1.HasActiveEntity){O1.push(y(j[i].getPath(),k));}}}var P1=0;return new Promise(function(Q1,R1){Promise.all(O1).then(function(S1){for(var i=0;i<j.length;i++){J1=k.getObject(j[i].getPath());K1={};L1={};M1=true;N1={};if(!J1.IsActiveEntity){K1.draft=true;if(J1.HasActiveEntity){L1.draft=false;L1.draftActive=true;if(S1[P1]!="Error"){N1["oModel"]=j[0].getModel();N1["sPath"]=S1[P1++];}}}else if(J1.HasDraftEntity){var T1=k.getProperty("DraftAdministrativeData/CreatedByUserDescription",j[i]);var U1=k.getProperty("DraftAdministrativeData/InProcessByUser",j[i]);if(U1){K1.locked=true;K1.user=T1;G1.lockedItemsCount++;}else{K1.unsavedChanges=true;K1.user=T1;G1.unsavedChangesItemsCount++;}}if(F1&&F1!==""){if(k.getProperty(F1,j[i])===false){M1=false;G1.undeletableCount++;}}H1.push({context:j[i],draftStatus:K1,deletable:M1});if(!J1.IsActiveEntity&&J1.HasActiveEntity){I1.push({context:N1,draftStatus:L1,deletable:M1});}}if(I1.length>0){H1=H1.concat(I1);}G1.items=H1;if(G1.lockedItemsCount===G1.itemsCount){G1.text.title=l.getText("ST_GENERIC_ERROR_TITLE");}else{G1.text.title=(G1.itemsCount>1)?l.getText("ST_GENERIC_DELETE_TITLE_WITH_COUNT",[G1.itemsCount]):l.getText("ST_GENERIC_DELETE_TITLE");}G1.text.unsavedChanges=l.getText("ST_GENERIC_UNSAVED_CHANGES_CHECKBOX");if(G1.itemsCount>1){if(G1.lockedItemsCount===G1.itemsCount){G1.text.shortText=l.getText("ST_GENERIC_DELETE_LOCKED_PLURAL");}else if(G1.unsavedChangesItemsCount===G1.itemsCount){G1.text.shortText=l.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES_PLURAL");}else if(G1.lockedItemsCount>0){var V1=G1.itemsCount-G1.lockedItemsCount;G1.text.shortText=(G1.lockedItemsCount>1)?l.getText("ST_GENERIC_CURRENTLY_LOCKED_PLURAL",[G1.lockedItemsCount,G1.itemsCount]):l.getText("ST_GENERIC_CURRENTLY_LOCKED",[G1.itemsCount]);G1.text.shortText+="\n";if(V1===G1.unsavedChangesItemsCount){G1.text.shortText+=(V1>1)?l.getText("ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES_PLURAL"):l.getText("ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES");}else{G1.text.shortText+=(V1>1)?l.getText("ST_GENERIC_DELETE_REMAINING_PLURAL",[V1]):l.getText("ST_GENERIC_DELETE_REMAINING");}}else{G1.text.shortText=l.getText("ST_GENERIC_DELETE_SELECTED_PLURAL");}if(G1.undeletableCount>0){G1.text.undeletableText=l.getText("ST_GENERIC_DELETE_UNDELETABLE",[G1.undeletableCount,G1.itemsCount]);}}else{if(G1.lockedItemsCount>0){G1.text.shortText=l.getText("ST_GENERIC_DELETE_LOCKED",[" ",G1.items[0].draftStatus.user]);}else if(G1.unsavedChangesItemsCount>0){G1.text.shortText=l.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES",[" ",G1.items[0].draftStatus.user]);}else{G1.text.shortText=l.getText("ST_GENERIC_DELETE_SELECTED");}}Q1({"mJSONData":G1});});});}function I(i,j,k,x){var D1=l.getNavigationHandler();var E1={};var F1={};for(var G1 in i.parameters){if(q.isEmptyObject(i.parameters[G1])){E1[G1]=i.parameters[G1];}else{F1[G1]=i.parameters[G1];}}F1=E(F1);D1.mixAttributesAndSelectionVariant({},x).getParameterNames().forEach(function(G1){delete E1[G1];});var H1=k&&k.getObject();var I1=j&&j.getObject?j.getObject():j&&j[0];var J1=q.extend({},E1,H1,I1,F1);return D1.mixAttributesAndSelectionVariant(J1,x);}function K(i,j,k,x){var D1=l.getNavigationHandler();var E1;if(k){E1=k.getUiState().getSelectionVariant();if(typeof E1!=="string"){E1=JSON.stringify(E1);}}var F1=I(i,j,C.getView().getBindingContext(),E1);var G1={semanticObject:i.semanticObject,action:i.action};C.adaptNavigationParameterExtension(F1,G1);D1.navigate(i.semanticObject,i.action,F1.toJSONString(),null,H);}function L(i){var j=l.getNavigationHandler();var k={semanticObject:i.semanticObject,action:i.action};var x=j.mixAttributesAndSelectionVariant(i.semanticAttributes);C.adaptNavigationParameterExtension(x,k);j.navigate(i.semanticObject,i.action,x.toJSONString(),null,H);}function O(i,k){var x=i.byId("icon");var D1=x&&x.getSrc();if(D1===""){D1=undefined;}var E1=i.byId("title");var F1=E1&&E1.getText();if(F1===""){F1=undefined;}var G1=i.byId("description");var H1=G1&&G1.getText();if(H1===""){H1=undefined;}for(var j=0;j<k.length;j++){var I1=k[j];var J1=A.getStableIdPartFromFacet(I1)+"::contactTitleAreaIcon";var K1=i.byId(J1);var L1=A.getStableIdPartFromFacet(I1)+"::contactTitleAreaTitle";var M1=i.byId(L1);var N1=A.getStableIdPartFromFacet(I1)+"::contactTitleAreaDescription";var O1=i.byId(N1);var P1=K1&&K1.getSrc();if(P1===""){P1=undefined;}var Q1=M1&&M1.getText();if(Q1===""){Q1=undefined;}var R1=O1&&O1.getText();if(R1===""){R1=undefined;}if(D1&&P1&&F1&&Q1&&H1&&R1){if((D1===P1||!P1)&&(F1===Q1||!Q1)&&(H1===R1||!R1)){var S1=A.getStableIdPartFromFacet(I1)+"::contactTitleArea";var T1=i.byId(S1);if(T1&&T1.setVisible){T1.setVisible(false);}}}}}function P(i,j,k,x){var D1=C.getOwnerComponent().getAppComponent().getManifestEntry("sap.app");var E1=D1.crossNavigation.outbounds[i.data("CrossNavigation")];var F1;if(k){if(l.isSmartChart(i)){F1=l.getOwnerControl(x);}else{F1=l.getOwnerControl(i).getParent();}}K(E1,j,k,F1);}function Q(j,k){for(var i=0;i<j.length;i++){if(j[i].indexOf("/")!==-1){var x=j[i].split("/");x.pop();var D1=x.join("/");if(k.indexOf(D1)===-1){k.push(D1);}}}}function R(i,j){}function U(C,j,k){var x=C.getOwnerComponent().getAppComponent().getConfig();if(C.getMetadata().getName()==='sap.suite.ui.generic.template.ListReport.view.ListReport'&&x&&x.pages[0]&&x.pages[0].component&&x.pages[0].component.settings&&x.pages[0].component.settings.quickVariantSelectionX){var D1=j.getFilters();if(D1){for(var i in D1){k.filters.push(D1[i]);}}}}function W(i,j){l.processDataLossConfirmationIfNonDraft(function(){var k=i.data('SemanticObject');var x=i.data('Action');var D1=i.data('SemanticAttributes');if(k&&x){var E1={semanticObject:k,action:x};if(D1){D1="{"+D1+"}";E1.semanticAttributes=JSON.parse(D1);}L(E1);}},q.noop);}function X(k,x,D1,E1,F1){var G1="";var H1=function(k2){var l2=k2.dependent.propertyRef;var m2=x.originalId;var n2=C.getView().byId(m2);if(n2&&n2.mProperties.fieldName){for(var o2 in l2){if(l2[o2].name===n2.mProperties.fieldName){G1=n2.mProperties.fieldName;return true;}}}if(!n2){var p2=q("#"+m2.replace(/(:|\.|\[|\]|,|=)/g,"\\$1"));if(p2){n2=p2.control(0);if(n2&&n2.mProperties.fieldName){for(var o2 in l2){if(l2[o2].name===n2.mProperties.fieldName){G1=n2.mProperties.fieldName;return true;}}}}}return false;};var I1=function(){var J1,Q1,k2,l2,m2,n2,o2;Q1=k.getModel().getMetaModel();k2=Q1.getODataEntitySet(k.getEntitySet());l2=Q1.getODataEntityType(k2.entityType);if(!l2||!l2.navigationProperty){return;}for(var i=0;i<l2.navigationProperty.length;i++){m2=l2.navigationProperty[i];if(m2.name==="SiblingEntity"||m2.name==="DraftAdministrativeData"){continue;}var p2=m2.relationship;var q2=p2.lastIndexOf(".");var r2=p2.slice(0,q2);var s2=p2.slice(q2+1);var t2=Q1.getObject("/dataServices/schema");var u2;for(var j in t2){if(t2[j].namespace===r2){u2=t2[j];break;}}var v2=u2.association;var w2;for(var j in v2){if(v2[j].name===s2){w2=v2[j];break;}}var x2=w2.referentialConstraint;if(x2&&x2.dependent&&x2.dependent.propertyRef){var y2=H1(x2);if(y2){n2=Q1.getODataAssociationEnd(l2,m2.name);o2=Q1.getODataEntityType(n2.type);var z2=Q1.getODataEntityContainer();var A2="";var B2="";var C2="";for(var j=0;j<z2.entitySet.length;j++){var D2=o2.entityType;if(!D2){D2=o2.namespace+"."+o2.name;}if(z2.entitySet[j].entityType===D2){A2=z2.entitySet[j].name;B2=z2.entitySet[j].entityType;break;}}J1={navigation:m2.name,entitySet:A2,entityType:B2};if(o2["com.sap.vocabularies.UI.v1.HeaderInfo"]&&B2){var C2=Q1.getODataEntityType(B2,true)+"/com.sap.vocabularies.UI.v1.HeaderInfo";J1.headerInfoPath=C2;}if(o2["com.sap.vocabularies.UI.v1.QuickViewFacets"]&&B2){var E2=Q1.getODataEntityType(B2,true)+"/com.sap.vocabularies.UI.v1.QuickViewFacets";J1.quickViewFacetODataPath=E2;}return J1;}}}return J1;};var J1=I1();var K1=false;var L1=false;var M1=false;var N1=[];var O1=C.getOwnerComponent();var P1=O1.getModel();var Q1=P1.getMetaModel();if(J1){if(J1.quickViewFacetODataPath){var R1=Q1.createBindingContext(J1.quickViewFacetODataPath,true);var S1=R1&&R1.getModel().getObject(R1.getPath());if(S1){K1=true;for(var j=0;j<S1.length;j++){var T1=S1[j];if(T1&&T1.Target&&T1.Target.AnnotationPath){if(T1.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>-1){L1=true;}else if(T1.Target.AnnotationPath.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){M1=true;N1.push(T1);}}}}}}if(K1){var U1,V1;U1=Q1.getODataEntitySet(k.getEntitySet());V1=Q1.getODataEntityType(U1.entityType);var W1=J1.headerInfoPath&&Q1.createBindingContext(J1.headerInfoPath,true);var F1=x.mainNavigation;var X1=x.semanticObject;var Y1,Z1;if(X1&&F1){var $1=F1.getTarget&&F1.getTarget()||"";var _1=F1.getKey&&F1.getKey();if(_1){var a2=_1.split(X1+"-");Y1=a2&&a2[1];if(X1&&Y1){Z1={"Target":$1,"SemanticObject":X1,"Action":Y1};}if(x.semanticAttributes){Z1.SemanticAttributes=x.semanticAttributes;for(var i in x.semanticAttributes){var b2=x.semanticAttributes[i];if(b2.indexOf("{\"__deferred\":")>-1){delete Z1.SemanticAttributes[i];}if(b2.indexOf("{\"__ref\":")>-1){delete Z1.SemanticAttributes[i];}}if(Z1.SemanticAttributes){var c2=JSON.stringify(Z1.SemanticAttributes);if(c2&&c2.length>1){Z1.SemanticAttributes=c2.substring(1,c2.length-1);}}}}}var d2=Q1.getODataProperty(V1,G1);var e2=k&&k.mProperties&&k.mProperties.fieldSemanticObjectMap;var f2=new J({sourceClickedField:d2,sourceEntityType:V1,showFieldGroup:L1,showContact:M1,ignoredFields:e2,navigationPath:J1.navigation,mainNavigation:Z1});f2.setDefaultBindingMode("OneWay");var g2={};g2.oState=D1;g2._templateEventHandlers={};g2._templateEventHandlers.onSemanticObjectLinkNavigationPressed=C._templateEventHandlers.onSemanticObjectLinkNavigationPressed.bind(C._templateEventHandlers);g2._templateEventHandlers.onDataFieldWithIntentBasedNavigation=C._templateEventHandlers.onDataFieldWithIntentBasedNavigation.bind(C._templateEventHandlers);g2.onInit=function(){};g2.onExit=function(){};g2.onAfterRendering=function(){var C=this;var h2=C.oView;var k2=h2.getParent().getParent().getParent();k2.setBusy(false);};g2.connectToView=C.connectToView.bind(g2);var h2=sap.ui.view({async:true,preprocessors:{xml:{bindingContexts:{sourceEntitySet:Q1.createBindingContext(Q1.getODataEntitySet(k.getEntitySet(),true)),entitySet:Q1.createBindingContext(Q1.getODataEntitySet(J1.entitySet,true)),header:W1,facetCollection:R1},models:{sourceEntitySet:Q1,entitySet:Q1,header:Q1,facetCollection:Q1,quickView:f2,parameter:o.getParameterModelForTemplating()}}},controller:g2,type:V.XML,viewName:"sap.suite.ui.generic.template.fragments.QuickViewSmartForm",height:"100%"});x.show(undefined,undefined,undefined,h2);var i2=function(k2){var l2=k2.getSource();if(l2){var m2=l2.getParent().getParent().getParent();m2.setBusy(true);m2.setBusyIndicatorDelay(10);}};h2.attachBeforeRendering(i2.bind(this));var j2=function(k2){var l2=k2.getSource();if(l2){var m2=l2.byId("ownTitleArea");if(m2){var n2=l2.getParent();if(n2&&n2.getItems){var o2=n2.getItems()&&n2.getItems()[0];if(o2&&o2!=l2){o2.setVisible(false);}}}if(M1&&N1&&m2){O(l2,N1);}}};h2.attachAfterRendering(j2.bind(this));}else{x.show(E1,F1,undefined,undefined);}}function Y(C,i){var x=C.getView&&C.getView().getBindingContext();var D1=x.getObject();var E1=C.getOwnerComponent().getModel().getMetaModel();var F1=E1.getODataEntitySet(C.getOwnerComponent().getEntitySet());var G1=E1.getODataEntityType(F1.entityType);var H1=G1["com.sap.vocabularies.Common.v1.SemanticKey"];var I1={};if(H1&&H1.length>0){for(var j=0;j<H1.length;j++){var J1=H1[j].PropertyPath;if(!I1[J1]){I1[J1]=[];I1[J1].push(D1[J1]);}}}else{for(var k in G1.key.propertyRef){var K1=G1.key.propertyRef[k].name;if(!I1[K1]){I1[K1]=[];I1[K1].push(D1[K1]);}}}return I1;}function Z(k,i,x,D1){if(k[i].entitySet==x&&D1===k[i].navigationProperty&&k[i].navigation&&k[i].navigation["display"]&&(k[i].component&&k[i].component.settings&&k[i].component.settings.hideChevronForUnauthorizedExtNav===true)){return k[i].navigation.display.target;}else if(k[i].entitySet==x&&k[i].navigation&&k[i].navigation["display"]&&(k[i].component&&k[i].component.settings&&k[i].component.settings.hideChevronForUnauthorizedExtNav===true)){return k[i].navigation.display.target;}else if(k[i].pages){for(var j=0;j<(k[i].pages.length);j++){var E1=Z(k[i].pages,j,x,D1);if(E1!==undefined&&E1!==null){return E1;}}}}function $(i){var j=i.getSource().getTable();var k=i.getSource().getEntitySet();var x=i.getSource().getTableBindingPath();var D1=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService&&sap.ushell.Container.getService("CrossApplicationNavigation");var E1=C.getOwnerComponent().getAppComponent().getConfig().pages;var F1=Z(E1,0,k,x);if(F1!==undefined&&F1!==null&&D1){var G1=C.getOwnerComponent().getAppComponent().getManifestEntry("sap.app").crossNavigation.outbounds[F1];if(G1){var H1=G1.semanticObject;var I1=G1.action;var J1=C.getView().getModel("_templPriv");var K1=J1.getProperty("/generic/supportedIntents/");var L1=(x==="")?k:k+"::"+x;var M1=J1.getProperty("/generic/supportedIntents/"+H1+"/"+I1+"/"+L1);if(!M1){var N1={},O1;var P1=C.getOwnerComponent().getAppComponent();for(var Q1 in G1.parameters){if(!q.isEmptyObject(G1.parameters[Q1])){N1[Q1]=G1.parameters[Q1];}}if(C.getMetadata().getName()==='sap.suite.ui.generic.template.ObjectPage.view.Details'){O1=Y(C,P1);}var R1={semanticObject:H1,action:I1};var S1=q.extend({},O1,N1);var T1={target:R1,params:S1};var U1=D1.isNavigationSupported([T1],P1);U1.done(function(V1){var W1=J1.getProperty("/generic/supportedIntents/"+H1);if(!W1){K1[H1]={};K1[H1][I1]={};K1[H1][I1][L1]={"supported":V1[0].supported};}else if(!W1[I1]){W1[I1]={};W1[I1][L1]={"supported":V1[0].supported};}else{W1[I1][L1]={"supported":V1[0].supported};}J1.updateBindings();if(V1[0].supported&&l.isUiTable(j)){var X1=j.getRowActionTemplate();X1.getItems()[0].setVisible(true);j.setRowActionTemplate(X1);}});}}}}function _(i){l.setEnabledToolbarButtons(i.getSource());$(i);}function a1(i,j){if(!o.isDraftEnabled()||!i){return;}var k=i.getControlByKey("EditState");var x=k&&k.getSelectedKey()||"";switch(x){case"1":j.filters.push(new F("IsActiveEntity","EQ",true));j.filters.push(new F("HasDraftEntity","EQ",false));break;case"2":j.filters.push(new F("IsActiveEntity","EQ",false));break;case"3":j.filters.push(new F("IsActiveEntity","EQ",true));j.filters.push(new F("SiblingEntity/IsActiveEntity","EQ",null));j.filters.push(new F("DraftAdministrativeData/InProcessByUser","NE",""));break;case"4":j.filters.push(new F("IsActiveEntity","EQ",true));j.filters.push(new F("SiblingEntity/IsActiveEntity","EQ",null));j.filters.push(new F("DraftAdministrativeData/InProcessByUser","EQ",""));break;default:var D1=new F({filters:[new F("IsActiveEntity","EQ",false),new F("SiblingEntity/IsActiveEntity","EQ",null)],and:false});if(j.filters[0]&&j.filters[0].aFilters){var E1=j.filters[0];j.filters[0]=new F([E1,D1],true);}else{j.filters.push(D1);}break;}}function b1(i,j,k){var x,D1;if(i){D1=i.split(",");x=D1.length;while(x--){i=D1[x];if(i&&j.indexOf(i)<0){j.push(i);k.parameters.select+=","+i;}}}}function c1(D1,E1){var F1=D1.getSource();var G1=F1.getTable(),H1=function(B2){return B2.getMetadata().getName();};if(H1(G1)==="sap.m.Table"){var I1=G1.getColumns();for(var J1=0;J1<I1.length;J1++){if(I1[J1].getCustomData()[0].getValue()&&I1[J1].getCustomData()[0].getValue()["actionButton"]==="true"){I1[J1].setPopinDisplay("WithoutHeader");}}}var K1=D1.getParameter("bindingParams");K1.parameters=K1.parameters||{};if(F1.data().allowSearch){K1.parameters["custom"]={"search":D1.getSource().data().searchString};F1.data("allowSearch",false);}else if(F1.getBindingContext()&&F1.getBindingContext().getPath()===F1.data().objectPath){if(F1.getId()===F1.data().tableId){if(!!D1.getSource().data().searchString){K1.parameters["custom"]={"search":D1.getSource().data().searchString};}}}if(F1.data().allowSearchWorkListLight){K1.parameters["custom"]={"search":D1.getSource().data().searchString};F1.data("allowSearchWorkListLight",false);if(!!D1.getSource().data().searchString){K1.parameters["custom"]={"search":D1.getSource().data().searchString};}}var L1=C.byId(F1.getSmartFilterId());if(!L1&&C.getMetadata().getName()==='sap.suite.ui.generic.template.ListReport.view.ListReport'){L1=C.byId("listReportFilter");U(C,L1,K1);var M1=L1.getBasicSearchValue();if(!!M1){K1.parameters["custom"]={"search":M1};}}a1(L1,K1);r(F1.getEntitySet(),K1);var N1=K1.parameters.select&&K1.parameters.select.split(",")||[];var O1=K1.parameters&&K1.parameters.expand&&K1.parameters.expand.split(",")||[];var P1=F1.getEntitySet();if(N1&&N1.length>0){var Q1=F1.getModel().getMetaModel();var R1=Q1.getODataEntitySet(P1);var S1={};var T1=Q1.getODataEntityType(R1.entityType);for(var U1=0;U1<N1.length;U1++){var V1=N1[U1];if(V1){var S1=Q1.getODataProperty(T1,V1);if(S1&&S1["com.sap.vocabularies.Common.v1.FieldControl"]&&S1["com.sap.vocabularies.Common.v1.FieldControl"].Path){var W1=S1["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(W1!==" "&&K1.parameters.select.search(W1)===-1){K1.parameters.select+=","+W1;N1.push(W1);}}}}if(H1(G1)==="sap.m.Table"){var X1=K1.sorter[0];if(X1&&X1.vGroup){var Y1=m.getODataProperty(Q1,T1,X1.sPath);var Z1=Y1["com.sap.vocabularies.Common.v1.Text"]&&Y1["com.sap.vocabularies.Common.v1.Text"].Path;if(Z1){if(q.inArray(Z1,N1)===-1){K1.parameters.select+=","+Z1;N1.push(Z1);}}}}var $1=R1["Org.OData.Capabilities.V1.DeleteRestrictions"];if($1&&$1.Deletable&&$1.Deletable.Path&&K1.parameters.select.search($1.Deletable.Path)===-1){K1.parameters.select+=","+$1.Deletable.Path;N1.push($1.Deletable.Path);}var _1=R1["Org.OData.Capabilities.V1.UpdateRestrictions"];if(_1&&_1.Updatable&&_1.Updatable.Path&&K1.parameters.select.search(_1.Updatable.Path)===-1){K1.parameters.select+=","+_1.Updatable.Path;N1.push(_1.Updatable.Path);}var a2,b2;var T1=Q1.getODataEntityType(R1.entityType);var c2=T1["com.sap.vocabularies.UI.v1.LineItem"]||[];var d2=T1["com.sap.vocabularies.UI.v1.LineItem"];var e2="com.sap.vocabularies.UI.v1.Criticality";var f2=F1.getCustomData();for(var x=0;x<f2.length;x++){if(f2[x].getKey()&&f2[x].getKey()==="lineItemQualifier"){var g2=f2[x].getValue();if(g2){d2=T1["com.sap.vocabularies.UI.v1.LineItem#"+g2];e2="com.sap.vocabularies.UI.v1.Criticality#"+g2;break;}}}if(d2&&e2&&d2[e2]&&d2[e2].Path){N1.push(d2[e2].Path);K1.parameters.select+=","+d2[e2].Path;}for(var U1=0;U1<c2.length;U1++){if(c2[U1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"){a2=Q1.getODataFunctionImport(c2[U1].Action.String,true);if(a2){b2=Q1.getObject(a2);if(b2["sap:action-for"]!==" "&&b2["sap:applicable-path"]!==" "&&K1.parameters.select.search(b2["sap:applicable-path"])===-1){K1.parameters.select+=","+b2["sap:applicable-path"];N1.push(b2["sap:applicable-path"]);}}}if(c2[U1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||c2[U1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){var h2,i2;if(c2[U1].Value&&c2[U1].Value.Path){h2=Q1.getODataProperty(T1,c2[U1].Value.Path);if(h2){i2=h2["sap:text"]||(h2["com.sap.vocabularies.Common.v1.Text"]||"").Path||"";}if(!i2){i2=c2[U1].Value.Path;}if(N1.indexOf(i2)===-1){N1.push(i2);K1.parameters.select=K1.parameters.select+","+i2;}}}if(c2[U1].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(c2[U1].Target&&c2[U1].Target.AnnotationPath){var j2=c2[U1].Target.AnnotationPath;var k2=j2.split("@")[1];var l2=T1[k2];if(l2&&l2.MeasureAttributes){if(l2.MeasureAttributes[0]&&l2.MeasureAttributes[0].DataPoint&&l2.MeasureAttributes[0].DataPoint.AnnotationPath){var m2=l2.MeasureAttributes[0].DataPoint.AnnotationPath.split("@")[1];var n2=T1[m2];if(n2){for(var o2 in n2){if(n2[o2]&&n2[o2].Path&&N1.indexOf(n2[o2].Path)===-1){K1.parameters.select=K1.parameters.select+","+n2[o2].Path;N1.push(n2[o2].Path);}if(o2==="CriticalityCalculation"&&n2.CriticalityCalculation){for(var p2 in n2.CriticalityCalculation){if(n2.CriticalityCalculation[p2].Path&&N1.indexOf(n2.CriticalityCalculation[p2].Path)===-1){K1.parameters.select=K1.parameters.select+","+n2.CriticalityCalculation[p2].Path;N1.push(n2.CriticalityCalculation[p2].Path);}}}}}}}if(l2&&l2.Measures){if(l2.Measures[0]&&l2.Measures[0].PropertyPath&&N1.indexOf(l2.Measures[0].PropertyPath)===-1){K1.parameters.select=K1.parameters.select+","+l2.Measures[0].PropertyPath;N1.push(l2.Measures[0].PropertyPath);}}}}}var q2=l.getBreakoutActions(F1);for(var r2 in q2){if(q2[r2].requiresSelection&&q2[r2].applicablePath){if(K1.parameters.select.search(q2[r2].applicablePath)===-1){K1.parameters.select+=","+q2[r2].applicablePath;N1.push(q2[r2].applicablePath);}}}}Q(N1,O1);var s2=s.oDraftController.getDraftContext();if(s2.isDraftEnabled(P1)&&s2.isDraftRoot(P1)){if(s2.hasDraftAdministrativeData(P1)){if(N1&&N1.length>0){if(N1.indexOf("DraftAdministrativeData")===-1){N1.push("DraftAdministrativeData");K1.parameters.select=K1.parameters.select+",DraftAdministrativeData";}}if(O1.indexOf("DraftAdministrativeData")===-1){O1.push("DraftAdministrativeData");}}}if(O1.length>0){K1.parameters.expand=O1.join(",");}var t2=F1.getCustomData();var u2={};for(var k=0;k<t2.length;k++){u2[t2[k].getKey()]=t2[k].getValue();}var v2=F1.fetchVariant();if(!u2.TemplateSortOrder&&E1&&E1.determineSortOrder){u2.TemplateSortOrder=E1.determineSortOrder();}if((!v2||!v2.sort)&&(H1(G1)==="sap.m.Table")&&u2.TemplateSortOrder){var w2=u2.TemplateSortOrder.split(", ");for(var j=0;j<w2.length;j++){var x2=w2[j].split(" ");if(x2.length>1){K1.sorter.push(new b(x2[0],x2[1]==="true"));}else{K1.sorter.push(new b(x2[0]));}}}if(H1(G1)==="sap.m.Table"){var X1=K1.sorter[0];if(X1&&X1.vGroup){var y2;var z2=null;for(var i=0;i<I1.length;i++){if(I1[i].data("p13nData").leadingProperty===X1.sPath){z2=I1[i];break;}}if(z2){var y2=z2.getHeader().getProperty("text");X1.fnGroup=G(X1.sPath,y2);var A2=z2.data("p13nData").additionalProperty;b1(A2,N1,K1);}}}}function d1(i,j,k){k=k||i.getBindingContext();l.processDataLossConfirmationIfNonDraft(function(){if(i.data("CrossNavigation")){P(i,k,j.oSmartFilterbar);return;}var x=l.getOwnerControl(i);p(i);l.navigateFromListItem(k,x);},q.noop,j);}function e1(i){s.oApplication.performAfterSideEffectExecution(function(){if(s.oApplication.getBusyHelper().isBusy()){q.sap.log.info("Ignore incorrect selection, since app is busy anyway");return;}var j=i?"ST_GENERIC_MULTIPLE_ITEMS_SELECTED":"ST_GENERIC_NO_ITEM_SELECTED";M.error(l.getText(j),{styleClass:l.getContentDensityClass()});});}function f1(i,j){var k=i.getParent().getParent().getTable();var x=l.getSelectedContexts(k);if(x.length===1){l.processDataLossConfirmationIfNonDraft(function(){if(i.data("CrossNavigation")){P(i,x[0],j.oSmartFilterbar);return;}p(i);l.navigateFromListItem(x[0],k);},q.noop,j);}else{e1(x.length);}}function g1(j){var k,i,x;var D1=C.getOwnerComponent(),E1=D1.getAppComponent().getConfig(),F1=j.getSource().getCustomData();if(E1.settings&&E1.settings.flexibleColumnLayout){M.error(l.getText("ST_NAV_ERROR_NO_COMBINATION_WITH_FCL"),{styleClass:l.getContentDensityClass()});return;}if(F1.length===0){return;}for(i=0,x=F1.length;i<x;i++){if(F1[i].getProperty("key")==="Target"){k=F1[i].getProperty("value");break;}}if(!k){M.error(l.getText("ST_NAV_ERROR_NAV_PROPERTY_NOT_DETERMINED"),{styleClass:l.getContentDensityClass()});return;}var G1=D1.getModel(),H1=G1.getMetaModel();var I1=j.getSource().getBindingContext().getPath(),J1=I1.slice(1,I1.indexOf("(")),K1=H1.getODataEntityType(H1.getODataEntitySet(J1).entityType);var L1=H1.getODataAssociationEnd(K1,k),M1=H1.getODataEntityType(L1.type),N1,O1;if(M1){N1=M1.namespace+"."+M1.name;}var P1=H1.getODataEntityContainer().entitySet;for(i=0,x=P1.length;i<x;i++){if(P1[i].entityType===N1){O1=P1[i].name;break;}}if(!O1){M.error(l.getText("ST_NAV_ERROR_TARGET_ENTITYSET_NOT_DETERMINED"),{styleClass:l.getContentDensityClass()});return;}var Q1=l.getNavigationKeyProperties(O1),R1=s.oNavigationController,S1;if(o.isDraftEnabled()){S1={"$expand":"DraftAdministrativeData"};}else{S1={"$expand":""};}G1.read(I1+"/"+k,{urlParameters:S1,success:function(T1){var U1=l.mergeNavigationKeyPropertiesWithValues(Q1,T1);R1.navigateToContext(U1,null,false);},error:function(T1){M.error(l.getText("ST_NAV_ERROR_MODEL_READ_FAILED"),{styleClass:l.getContentDensityClass()});return;}});}function h1(i,j){var k=i.getSource();var x=l.getOwnerControl(k);var D1=l.getSelectedContexts(x);if(D1.length>1){e1(D1.length);}else{l.processDataLossConfirmationIfNonDraft(function(){var E1={action:k.data("Action"),semanticObject:k.data("SemanticObject")};K(E1,D1[0],j.oSmartFilterbar||undefined,j.oSmartTable||undefined);},q.noop,j);}}function i1(i,j){var k=i.getSource();var x=k.getParent().getBindingContext();var D1=k.data("SemanticObject");var E1=k.data("Action");l.processDataLossConfirmationIfNonDraft(function(){var F1={action:E1,semanticObject:D1};K(F1,x,j.oSmartFilterbar||undefined,j.oSmartTable||undefined);},q.noop,j);}function j1(i,j,k){l.processDataLossConfirmationIfNonDraft(function(){var x={action:j.Action,semanticObject:j.SemanticObject};K(x,i,k.oSmartFilterbar,k.oSmartTable);},q.noop,k);}function k1(i,j,k){var x=l.getElementCustomData(i);var D1=l.getSelectedContexts(j);var E1=!(x.RequiresContext&&x.RequiresContext==="false");if(E1&&D1.length!==1){e1(D1.length);}else{var F1=E1?D1[0]:null;j1(F1,x,k);}}function l1(i,j){l.processDataLossConfirmationIfNonDraft(function(){var k={semanticObject:i.data("SemanticObject"),action:i.data("Action")};var x=i.getParent().getBindingContext();K(k,x,j.oSmartFilterbar,j.oSmartTable);},q.noop,j);}function m1(i,j){var k=i.getSource();var x=l.getOwnerControl(k).getParent();var D1=[k.getBindingContext()];var E1=l.getElementCustomData(k);var F1=x.getTableBindingPath();l.triggerAction(D1,F1,E1,x,j);}function n1(i,j){var k=C.getView();var x=j?l.getSelectedContexts(j):[k.getBindingContext()];if(x.length===0){e1(x.length);}else{var D1=i.getSource();var E1=l.getElementCustomData(D1);var F1=j?j.getTableBindingPath():k.getBindingPath();l.triggerAction(x,F1,E1,j);}}function o1(i,j){var k,x="";var D1=l.getOwnerControl(i.getSource());var E1=i.getSource().data();var F1=l.getSelectedContexts(D1);if(l.isSmartTable(D1)){k=D1.getTable();x=D1.getTableBindingPath();}else if(l.isSmartChart(D1)){k=D1.getChart();x=D1.getChartBindingPath();}var G1=q1(F1,E1);if(G1.inApplicableCount>0&&(l.isSmartTable(D1)&&((k.getMode&&k.getMode()==="MultiSelect")||(k.getSelectionMode&&k.getSelectionMode()==="MultiToggle")))){var H1=l.getText("ST_GENERIC_WARNING_TEXT",[G1.inApplicableCount]);G1.warningText=H1;var I1={functionImportPath:E1.Action,contexts:G1.aApplicableContexts,sourceControl:k,label:E1.Label,operationGrouping:E1.InvocationGrouping,navigationProperty:"",sBindingPath:x,oState:j};var J1=p1(D1);var K1=J1.getModel("Action");K1.setData(I1);var L1=new sap.ui.model.json.JSONModel(G1);J1.setModel(L1,"list");var M1=J1.getModel("list");M1.setData(G1);J1.open();}else{r1({functionImportPath:E1.Action,contexts:F1,sourceControl:k,label:E1.Label,operationGrouping:E1.InvocationGrouping,navigationProperty:""},j,x);}}function p1(i){return l.getDialogFragment("sap.suite.ui.generic.template.fragments.ActionConfirmation",{onCancel:function(j){var k=j.getSource().getParent();k.close();},onContinue:function(j){var k=j.getSource().getParent();var x=j.getSource().getParent().getModel("Action").getData();r1({functionImportPath:x.functionImportPath,contexts:x.contexts,sourceControl:x.sourceControl,label:x.label,operationGrouping:x.operationGrouping,navigationProperty:x.navigationProperty},x.oState,x.sBindingPath);k.close();}},"Action");}function q1(j,k){var x,D1,E1,F1;var G1=C.getView().getModel();var H1=G1.getMetaModel();if(j&&j.length>0){E1=j[0].sPath.substring(1,j[0].sPath.indexOf('('));F1=H1.getODataEntitySet(E1);}if(F1){var I1=k.Action.split("/")[1];var J1=[],K1=[];var L1={aInApplicableItems:undefined,inApplicableCount:0,dialogTitle:k.Label,warningText:undefined,aApplicableContexts:undefined};if(I1){D1=H1.getODataFunctionImport(I1)["sap:applicable-path"];}for(var i=0;i<j.length;i++){x=G1.getObject(j[i].getPath());if(!x[D1]){L1.inApplicableCount++;var M1=H1.getODataEntityType(H1.getODataEntitySet(E1).entityType);var N1=M1["com.sap.vocabularies.UI.v1.HeaderInfo"].Title.Value;var O1="";if(N1.Path){O1=j[i].getProperty(N1.Path);}else{O1=N1.String||"";}J1.push({sKey:O1});}else{K1.push(j[i]);}}L1.aInApplicableItems=J1;L1.aApplicableContexts=K1;}return L1;}function r1(i,j,k){var x;l.processDataLossConfirmationIfNonDraft(function(){s.oCRUDManager.callAction({functionImportPath:i.functionImportPath,contexts:i.contexts,sourceControl:i.sourceControl,label:i.label,operationGrouping:i.operationGrouping,navigationProperty:i.navigationProperty},j).then(function(D1){if(D1&&D1.length&&D1.length===1){x=D1[0];if(x.response&&x.response.context&&(!x.actionContext||x.actionContext&&x.response.context.getPath()!==x.actionContext.getPath())){s.oViewDependencyHelper.setMeToDirty(C.getOwnerComponent(),k);}}});},q.noop,j,"Proceed");}var s1;var t1;function u1(i){s1=true;t1=i;var j=l.getDialogFragment("sap.suite.ui.generic.template.fragments.DiscardDraftPopover",{onDiscardConfirm:function(){q.sap.log.info("Draft cancellation confirmed");if(!s1){q.sap.log.info("Draft popover no longer active -> Ignore.");return;}t1();}},"discard");return j;}function v1(i,j){var k=new Promise(function(D1,E1){i.then(function(F1){q.sap.log.info("Active information for current draft has been read. Start discarding the draft");var G1=F1&&F1.getObject();var H1=G1&&G1.IsActiveEntity;var I1=H1?s.oApplication.getTargetAfterCancelPromise(F1):Promise.resolve();I1.then(function(J1){var K1=s.oCRUDManager.deleteEntity(false,true);if(!J1){s.oApplication.prepareDeletionOfCreateDraft(K1);}K1.then(function(){q.sap.log.info("Draft was discarded successfully");j();s.oViewDependencyHelper.setRootPageToDirty();s.oViewDependencyHelper.unbindChildren(C.getOwnerComponent());if(J1){q.sap.log.info("Navigate to active entityy");s.oNavigationController.navigateToContext(J1,null,true,1);}D1();},E1);},E1);},E1);});var x={discardPromise:k};o.fire(C,"AfterCancel",x);s.oApplication.getBusyHelper().setBusy(k);k.catch(j);return k;}function w1(i){var j=n();s.oApplication.performAfterSideEffectExecution(function(){if(s.oApplication.getBusyHelper().isBusy()){q.sap.log.info("Ignore discarding confirmation as app is already busy");return;}var k=C.getView().getBindingContext();var x=k.getObject();var D1=x.hasOwnProperty("HasActiveEntity")&&!k.getProperty("IsActiveEntity")&&!k.getProperty("HasActiveEntity");var E1=k&&k.getPath();var F1=s.oApplication.getIsDraftModified(E1);if(F1){var G1=i.getSource();var H1;var I1=function(){s1=false;H1.close();q.sap.log.info("Draft popover closed");};H1=u1(v1.bind(null,j,I1));var J1=H1.getModel("discard");J1.setProperty("/placement",sap.m.PlacementType.Top);J1.setProperty("/isCreateDraft",D1);H1.openBy(G1);}else{v1(j,q.noop);}});}function x1(){if(o.getViewLevel()!==1||!o.isDraftEnabled()){q.sap.log.warning("Discard draft only possible on root level of draft enabled entities");return Promise.reject();}var i=C.getOwnerComponent();if(!(o.isComponentActive()&&i.getModel("ui").getProperty("/editable"))){q.sap.log.warning("Discard draft only possible in edit mode");return Promise.reject();}var j=n();return v1(j,q.noop);}function y1(i,j,k){if(i.data("CrossNavigation")){P(i,i.getBindingContext(),k);return new Promise(function(H1){H1();});}var x=l.getOwnerControl(i);var D1=x.getTableBindingPath();var E1=C.getOwnerComponent();var F1={}||(k&&C.getPredefinedValuesForCreateExtension(k));var G1=function(H1){var I1=s.oCRUDManager.addEntry(x,H1).then(function(J1){if(!j){s.oNavigationController.navigateToContext(J1.newContext,J1.tableBindingPath,false,4);s.oApplication.getBusyHelper().getUnbusy().then(s.oViewDependencyHelper.setMeToDirty.bind(null,E1,D1));}else{l.refreshSmartTable(x);s.oApplicationController.executeSideEffects(E1.getBindingContext(),[],[D1]);}});I1.catch(q.noop);return I1;};if(F1 instanceof Promise){return F1.then(G1);}else{return G1(F1);}}function z1(i){var j=l.getOwnerControl(i.getSource());var k=l.getSelectedContexts(j);if(k&&k.length>0){var x=z(k);var D1=w(j);var E1=D1.getModel("delete");x.then(function(x){E1.setData(x.mJSONData);D1.open();});}else{M.error(l.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:l.getContentDensityClass()});}}function A1(i){var j;if(i.getSource().data("Location")==="Header"){j=i.getSource().getParent().getAggregation("items")[0];}else if(i.getSource().data("Location")==="Section"){j=i.getSource().getParent().getElements()[1];}else if(i.getSource().data("Location")==="SmartTable"){j=i.getSource().getParent().getAggregation("items")[0];}else{j=i.getSource().getParent().getParent().getParent().getParent().getParent().getAggregation("items")[1];}j.bindElement(i.getSource().getBindingContext().getPath());j.openBy(i.getSource());}function B1(i){var j=i.getSource();var k=i.getParameter("bindingParams");k.parameters=k.parameters||{};var x=C.byId("listReportFilter");U(C,x,k);C1(i,j,k);}function C1(i,j,k){var x=C.byId("listReportFilter");a1(x,k);var D1=j.getEntitySet();r(D1,k);}var I=t.testable(I,"fnBuildSelectionVariantForNavigation");var E=t.testable(E,"fnEvaluateParameters");var K=t.testable(K,"fnNavigateIntent");var O=t.testable(O,"fnHideTitleArea");return{onDataReceived:_,onBeforeRebindTable:c1,onListNavigate:d1,onShowDetails:f1,onEditNavigateIntent:P,onSemanticObjectLinkPopoverLinkPressed:R,onDataFieldWithNavigationPath:g1,onDataFieldForIntentBasedNavigation:h1,onDeterminingDataFieldForIntentBasedNavigation:k1,onDeterminingDataFieldForAction:n1,onInlineDataFieldForIntentBasedNavigation:l1,onDataFieldWithIntentBasedNavigation:i1,onInlineDataFieldForAction:m1,onSmartFieldUrlPressed:u,onBreadCrumbUrlPressed:v,onCallActionFromToolBar:o1,onDiscardDraft:w1,discardDraftWithoutDialog:x1,addEntry:y1,deleteEntries:z1,onContactDetails:A1,onSemanticObjectLinkNavigationTargetObtained:X,onSemanticObjectLinkNavigationPressed:W,onBeforeRebindChart:B1};}return B.extend("sap.suite.ui.generic.template.lib.CommonEventHandlers",{constructor:function(C,o,s,i){q.extend(this,h(C,o,s,i));}});});
